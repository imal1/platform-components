!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("lodash"),require("dayjs")):"function"==typeof define&&define.amd?define(["lodash","dayjs"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["platform-components"]=e(t.lodash,t.dayjs)}(this,(function(t,e){"use strict";function n(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var r=n(e);const o={date:"yyyy-MM-dd",month:"yyyy-M",datetime:"yyyy-MM-dd HH:mm:ss",time:"HH:mm:ss",timerange:"HH:mm:ss",daterange:"yyyy-MM-dd",monthrange:"yyyy-M",datetimerange:"yyyy-MM-dd HH:mm:ss",year:"yyyy",quarter:"yyyy"};function i(t,e,n,r,o,i,a,s,l,c){"boolean"!=typeof a&&(l=s,s=a,a=!1);const u="function"==typeof n?n.options:n;let d;if(t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,o&&(u.functional=!0)),r&&(u._scopeId=r),i?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(i)},u._ssrRegister=d):e&&(d=a?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,s(t))}),d)if(u.functional){const t=u.render;u.render=function(e,n){return d.call(n),t(e,n)}}else{const t=u.beforeCreate;u.beforeCreate=t?[].concat(t,d):[d]}return n}const a={name:"p-date-picker",inheritAttrs:!1,props:{type:{type:String,required:!0},value:{type:String,default:()=>""}},inject:["elForm","elFormItem"],data:()=>({quarterNumList:["一","二","三","四"]}),computed:{valueFormat(){return o[this.type]},quarterModel(){return("quarter"===this.type&&this.value.match("q")?this.value.split("q")[1]:r.default(this.value).quarter().toString())||"1"},watchModel(){return[this.value,this.type,this.quarterModel]}},watch:{watchModel([t,e,n],[o,i,a]){const s=r.default(t.split("q")[0]).format("YYYY");if(n!==a&&(t=`${s}q${n}`),t!==o&&"quarter"===e&&(t=`${s}q${n}`),i!==e){switch(e){case"year":t=s;break;case"quarter":t=`${s}q${n}`;break;case"month":t=`${s}-01`;break;case"date":t=`${s}-01-01`}valueModel.value=t}elForm&&elFormItem?elForm.model[elFormItem.prop]=t:this.$emit("update:value",t)}}};var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"p-date-picker"},[n("el-date-picker",t._g(t._b({model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},"el-date-picker",Object.assign({},{style:"quarter"===t.type?{width:"116px"}:void 0,type:"quarter"===t.type?"year":t.type,valueFormat:t.valueFormat,placeholder:"请选择日期",rangeSeparator:"至",startPlaceholder:"开始日期",endPlaceholder:"结束日期"},t.$attrs),!1),t.$listeners)),t._v(" "),"quarter"===t.type?n("el-select",{staticStyle:{width:"100px"},model:{value:t.quarterModel,callback:function(e){t.quarterModel=e},expression:"quarterModel"}},t._l(t.quarterNumList,(function(t,e){return n("el-option",{key:t,attrs:{label:"第"+t+"季度",value:""+(e+1)}})})),1):t._e()],1)};s._withStripped=!0;const l=i({render:s,staticRenderFns:[]},undefined,a,undefined,false,undefined,!1,void 0,void 0,void 0);const c={name:"p-form",components:{DatePicker:l},props:{items:{type:Array,required:!0},value:{type:Object,required:!1,default:()=>({})}},data:()=>({isArray:t.isArray}),computed:{formItems(){return this.items.map((e=>{const{content:n,...r}=e,o=t.pickBy(r,t.isFunction),i=t.omit(r,t.keys(o));if((e={content:n,columnAttrs:i,columnEvents:o}).content?.is){const{is:r,text:o,...i}=n,a=t.pickBy(i,t.isFunction),s=t.omit(i,t.keys(a));e.content={is:r,text:o,contentEvents:a,contentAttrs:s}}else t.isArray(e.content)&&e.content.forEach(((n,r)=>{const{is:o,text:i,name:a,...s}=n,l=t.pickBy(s,t.isFunction),c=t.omit(s,t.keys(l));e.content[r]={is:o,text:i,name:a,contentEvents:l,contentAttrs:c}}));return e}))}}};var u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",t._g(t._b({ref:"p-form",staticClass:"p-form",attrs:{model:t.value}},"el-form",t.$attrs,!1),t.$listeners),[t._l(t.formItems,(function(e){return[n("el-form-item",t._g(t._b({key:e.columnAttrs.prop},"el-form-item",e.columnAttrs,!1),e.columnEvents),[e.content&&e.content.is?n(e.content.is,t._g(t._b({tag:"component",model:{value:t.value[e.columnAttrs.prop],callback:function(n){t.$set(t.value,e.columnAttrs.prop,n)},expression:"value[item.columnAttrs['prop']]"}},"component",e.content.contentAttrs,!1),e.content.contentEvents),[e.content.text?n("span",[t._v(t._s(e.content.text))]):t._t(e.columnAttrs.prop)],2):t.isArray(e.content)?t._l(e.content,(function(r,o){return[r.is?n(r.is,t._g(t._b({key:o,tag:"component",model:{value:t.value[e.columnAttrs.prop],callback:function(n){t.$set(t.value,e.columnAttrs.prop,n)},expression:"value[item.columnAttrs['prop']]"}},"component",r.contentAttrs,!1),r.contentEvents),[r.text?n("span",[t._v(t._s(r.text))]):t._t(r.name)],2):t._t(r.name)]})):t._t(e.columnAttrs.prop)],2)]}))],2)};u._withStripped=!0;const d=i({render:u,staticRenderFns:[]},undefined,c,undefined,false,undefined,!1,void 0,void 0,void 0);function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){p(t,e,n[e])}))}return t}var f=function(t,e,n){Object.defineProperty(t,e,{configurable:!0,get:function(){return n},set:function(t){console.warn("tried to set frozen property ".concat(e," with ").concat(t))}})},y={abstract:!0,name:"Fragment",props:{name:{type:String,default:function(){return Math.floor(Date.now()*Math.random()).toString(16)}},html:{type:String,default:null}},mounted:function(){var t=this.$el,e=t.parentNode;t.__isFragment=!0,t.__isMounted=!1;var n=document.createComment("fragment#".concat(this.name,"#head")),r=document.createComment("fragment#".concat(this.name,"#tail"));t.__head=n,t.__tail=r;var o=document.createDocumentFragment();if(o.appendChild(n),Array.from(t.childNodes).forEach((function(e){var n=!e.hasOwnProperty("__isFragmentChild__");o.appendChild(e),n&&(f(e,"parentNode",t),f(e,"__isFragmentChild__",!0))})),o.appendChild(r),this.html){var i=document.createElement("template");i.innerHTML=this.html,Array.from(i.content.childNodes).forEach((function(t){o.appendChild(t)}))}var a=t.nextSibling;e.insertBefore(o,t,!0),e.removeChild(t),f(t,"parentNode",e),f(t,"nextSibling",a),a&&f(a,"previousSibling",t),t.__isMounted=!0},render:function(t){var e=this,n=this.$slots.default;return n&&n.length&&n.forEach((function(t){return t.data=m({},t.data,{attrs:m({fragment:e.name},(t.data||{}).attrs)})})),t("div",{attrs:{fragment:this.name}},n)}};const _={components:{Fragment:y},name:"p-table",props:{columns:{type:Array,required:!0},data:{type:Array,required:!1,default:()=>[]},pagination:{type:Object,required:!1,default:()=>null}},data:()=>({isNil:t.isNil}),computed:{paginEvents(){return t.pickBy(this.pagination,t.isFunction)},paginAttrs(){return t.omit(this.pagination,t.keys(this.paginEvents))}}};var v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fragment",[n("el-table",t._g(t._b({ref:"p-table",staticClass:"p-table",attrs:{stripe:!!t.isNil(t.$attrs.stripe)||t.$attrs.stripe,border:!!t.isNil(t.$attrs.border)||t.$attrs.border,"default-expand-all":!!t.isNil(t.$attrs.defaultExpandAll)||t.$attrs.defaultExpandAll,data:t.data}},"el-table",t.$attrs,!1),t.$listeners),[t._l(t.columns,(function(e,r){return[e.prop||"index"!==e.type&&"selection"!==e.type?e.children?n("el-table-column",t._b({key:e.prop||r,attrs:{align:"center"}},"el-table-column",e,!1),t._l(e.children,(function(e,o){return n("el-table-column",t._b({key:e.prop||""+r+o,attrs:{"header-align":"left"},scopedSlots:t._u([e.formatter?null:{key:"default",fn:function(n){var r=n.row,o=n.column,i=n.$index;return[t._t(e.prop,(function(){return[t._v("\n\t\t\t\t\t\t\t"+t._s(t.isNil(r[e.prop])?e.empty:r[e.prop])+"\n\t\t\t\t\t\t")]}),{row:r,column:o,index:i})]}}],null,!0)},"el-table-column",e,!1))})),1):n("el-table-column",t._b({key:e.prop||r,scopedSlots:t._u([e.formatter?null:{key:"default",fn:function(n){var r=n.row,o=n.column,i=n.$index;return[t._t(e.prop,(function(){return[t._v("\n\t\t\t\t\t\t"+t._s(t.isNil(r[e.prop])?e.empty:r[e.prop])+"\n\t\t\t\t\t")]}),{row:r,column:o,index:i})]}},!e.label&&e.header?{key:"header",fn:function(n){var r=n.column,o=n.$index;return[t._t(e.prop+"-header",null,{column:r,index:o})]}}:null],null,!0)},"el-table-column",e,!1)):n("el-table-column",t._b({key:e.prop||r,attrs:{align:"center"}},"el-table-column",e,!1))]}))],2),t._v(" "),t.pagination?n("el-pagination",t._g(t._b({staticClass:"p-pagination",attrs:{background:""}},"el-pagination",t.paginAttrs,!1),t.paginEvents)):t._e()],1)};v._withStripped=!0;const b=i({render:v,staticRenderFns:[]},undefined,_,undefined,false,undefined,!1,void 0,void 0,void 0);const h={components:{Fragment:y},name:"p-button-dialog",props:{button:{type:Object,default:()=>null},visible:{type:Boolean,default:()=>!1}},data:()=>({dialogVisible:!1}),computed:{buttonEvents(){const e=t.pickBy(this.button,t.isFunction),n=e.click;return e.click=async()=>{n&&await n(),this.dialogVisible=!0},e},buttonAttrs(){return t.omit(this.button,t.keys(this.buttonEvents))}},watch:{visible:{handler(t){this.dialogVisible=t},immediate:!0}}};var g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fragment",{ref:"p-button-dialog"},[t.button?n("el-button",t._g(t._b({},"el-button",t.buttonAttrs,!1),t.buttonEvents),[t.button.label?[t._v("\n\t\t\t"+t._s(t.button.label)+"\n\t\t")]:[t._t("button")]],2):t._t("trigger"),t._v(" "),n("el-dialog",t._g(t._b({attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}},scopedSlots:t._u([t.$attrs.title?null:{key:"title",fn:function(){return[t._t("title")]},proxy:!0},{key:"footer",fn:function(){return[t._t("footer")]},proxy:!0}],null,!0)},"el-dialog",t.$attrs,!1),t.$listeners),[t._v(" "),t._t("default")],2)],2)};g._withStripped=!0;const k=i({render:g,staticRenderFns:[]},undefined,h,undefined,false,undefined,!1,void 0,void 0,void 0);const $={name:"p-descriptions-form",props:{items:{type:Array,required:!0},value:{type:Object,required:!1,default:()=>({})}},computed:{formItems(){return this.items.map((e=>{const{content:n,label:r,icon:o,descriptions:i,...a}=e,s=t.pickBy(a,t.isFunction);if((e={content:n,label:r,icon:o,descriptions:i,columnAttrs:t.omit(a,t.keys(s)),columnEvents:s}).content?.is){const{is:r,...o}=n,i=t.pickBy(o,t.isFunction),a=t.omit(o,t.keys(i));e.content={is:r,contentEvents:i,contentAttrs:a}}return e}))}}};var A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",t._g(t._b({ref:"p-descriptions-form",staticClass:"p-descriptions-form",attrs:{inline:"",model:t.value}},"el-form",t.$attrs,!1),t.$listeners),[n("el-descriptions",t._b({attrs:{size:"medium",border:""}},"el-descriptions",t.$attrs.descriptions,!1),[t._l(t.formItems,(function(e){return[n("el-descriptions-item",t._b({key:e.columnAttrs.prop,attrs:{label:e.label}},"el-descriptions-item",e.descriptions,!1),[n("template",{slot:"label"},[e.icon?n("i",{class:e.icon}):t._e(),t._v("\n\t\t\t\t\t"+t._s(e.label)+"\n\t\t\t\t")]),t._v(" "),n("el-form-item",t._g(t._b({key:e.columnAttrs.prop},"el-form-item",e.columnAttrs,!1),e.columnEvents),[e.content&&e.content.is?n(e.content.is,t._g(t._b({tag:"component",model:{value:t.value[e.columnAttrs.prop],callback:function(n){t.$set(t.value,e.columnAttrs.prop,n)},expression:"value[item.columnAttrs['prop']]"}},"component",e.content.contentAttrs,!1),e.content.contentEvents),[t._t(e.columnAttrs.prop)],2):t._t(e.columnAttrs.prop)],2)],2)]}))],2)],1)};A._withStripped=!0;const E=i({render:A,staticRenderFns:[]},undefined,$,undefined,false,undefined,!1,void 0,void 0,void 0);var x=[d,b,l,k,E],w=function(t){x.forEach((function(e){t.component(e.name,e)}))};return"undefined"!=typeof window&&window.Vue&&w(window.Vue),{install:w,PForm:d,PTable:b,PDatePicker:l,PButtonDialog:k,PDescriptionsForm:E}}));
